{% extends 'base.html' %}
{% block content %}

<div class="container">
      <ul class="nav nav-pills">
    <li class="active"><a data-toggle="pill" href="#profile">Profile</a></li>

    <!-- need to change these to two groups:  Received Invites (whose dates are in the future)  -->
    <!-- which has grouped Pending (accept/decline), Declined (accept), Accepted (decline) -->
    <!-- and Sent Invites (all but status 'ina'??) with (cancel) button changes status to 'ina' for all users on invites or (modify) which opens to /new-invitation with modal form populated with current data so you can change and submit...?? -->
    <!-- which has list by date & name that you click on to see: -->\
    <!-- Pending: list of users who have not responded to invite -->
    <!-- Active: list of users who have said yes -->
    <!-- Declined:  list of users who have declined the invite -->
    <li><a data-toggle="pill" href="#ActiveInvite">Active Invitations</a></li>
    <li><a data-toggle="pill" href="#PendingInvite">Pending Invitations</a></li>
    <li><a data-toggle="pill" href="#RejectedInvite">Rejected Invitations</a></li>
    <li><a data-toggle="pill" href="#Friends">Friends</a></li>
  </ul>
  <div class="tab-content">
      <div id="profile" class="tab-pane fade in active">
          <h2>Your User Profile</h2>
          <p> Click <a href='/rendezvous-map'>here</a> for animated google map
          </p> 
          <p> Click <a href="/invitation-new">here</a> to create a new Rendezvous
          </p>
        <h3>Click to go!</h3>
         <ul>{% for invite in active_invitation_data if invite[0] == 'act' %}
              {% if session.user_id == invite[7] %}
          <li>
              <form action='/rendezvous-map-v3' method='POST' name='inviteform'>
                <input type='hidden' name='user_id' value={{ session.user_id }}>
                <input type='hidden' name='invite_id' value={{ invite[1] }}>
                <input type='submit'name='submit_button' value= 'ID: {{invite[1] }} {{ invite[3] }} {{ invite[2] }}' style='width:auto' >
              </form>
          </li>
              {% else %}
          <li>
              <form action='/rendezvous-map-v3' method='POST' name='inviteform'>
                <input type='hidden' name='user_id' value={{ session.user_id }}>
                <input type='hidden' name='invite_id' value={{ invite[1] }}>
                <input type='submit'name='submit_button' value= 'ID: {{invite[1] }} {{ invite[3] }} {{ invite[2] }} with {{ invite.name }}' style='width:auto' >
              </form>
          </li>
              {% endif %}
             {% endfor %}
          </ul>

        Add query that makes buttons here for any friend requests that are n-days
        old.
      </div>
      <div id="ActiveInvite" class="tab-pane fade">
          <h2>Active Invitations</h2>
          <ul>{% for invite in active_invitation_data %} 
              <li>
                  <form action='/rendezvous-map-v3' method='POST' name='inviteform'>
                      <input type='hidden' name='user_id' value={{ session.user_id }}>
                      <input type='hidden' name='invite_id' value={{ invite[1] }}>
                      <input type='submit'name='submit_button' value= '{{ invite[3] }} {{ invite[2] }} with {{ invite.name}}' style='width:auto' >
                  </form>
              </li>
              {% endfor %}
          </ul>
      </div>
      <div id="PendingInvite" class="tab-pane fade">
          <h2>Pending Invitations</h2>
<!-- need to change this to pending (using active for now until pending query is built) -->
          <ul>{% for invite in active_invitation_data if invite[0] == 'pen' %}
            <li>
              Name: {{ invite[2] }} <br>
              Location: {{ invite[5]}}<br>
              {{ invite[6] }}<br>
              Invited by: {{ invite[4] }} <br>
              Date and time: {{ invite[3] }} <br>
              <form action='/invitation-accept-reject.json', method='POST' name='inviteform'>
                  <input type='hidden' name='invite_id' value={{ invite[0] }}>
                  <input type='submit'name='pending_submit_button' value= 'Accept' >
                  <input type='submit'name='peiding_submit_button' value= 'Decline' >
              </form>
            </li>
          {% endfor %}
          </ul>
      </div>
      <div id="RejectedInvite" class="tab-pane fade">
          <h2>Rejected Invitations</h2>
 <!-- need to change this to rejected (using active for now until pending query is built) -->
          <p>This will be a link to modal form to view rejected invites</p>
           <ul>{% for invite in active_invitation_data if invite[0] == 'rej' %}
            <li>
              Name: {{ invite[2] }} <br>
              Location: {{ invite[5]}}<br>
              {{ invite[6] }}<br>
              Invited by: {{ invite[4] }} <br>
              Date and time: {{ invite[3] }} <br>
          </li>
              {% endfor %}
          </ul>
      </div>
      <div id="Friends" class="tab-pane fade">
          <h2>Friend Requests:</h2>
          <p> Short description with buttons to Accept or Reject
          (maybe a note that if you reject, that person will not be able to ask you again)
          </p>
          <ul> {% for friend in user.pending_friends|sort(attribute='request_date') %} 
                  <li>
                      {{ friend.name }}
                  </li>
              {% endfor %}
          </ul>
      </div>
    </div>
</div>
{% endblock %}